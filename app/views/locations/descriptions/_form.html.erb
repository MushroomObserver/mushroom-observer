<%
presenter = LocationDescriptionFormPresenter.new(@description, @view, action)
%>

<%= form_with(scope: :description, url: presenter.url, method: presenter.method,
              id: "location_description_form") do |f| %>

  <%= submit_button(form: f, button: presenter.button, center: true) %>

  <%= render(partial: "descriptions/fields_for_description",
             locals: { f: f }) %>

  <hr/>

  <% LocationDescription.all_note_fields.each do |field| %>
    <%= text_area_with_label(
          form: f, field: field, rows: 10,
          between: help_block(:div, :"form_locations_#{field}_help".l),
          label: :"form_locations_#{field}".t + ":"
        ) %>
  <% end %>

  <%= render(partial: "shared/textilize_help") %>

  <%= submit_button(form: f, button: presenter.button, center: true) %>

  <% if (action == :update) && @merge %>
    <%= hidden_field_tag(:old_desc_id, @old_desc_id) %>
    <%= hidden_field_tag(:delete_after, @delete_after) %>
  <% end %>

<% end %>
