<%
# Requires local variable object: RssLog, Observation, Image, etc. instance.
link_type ||= nil
link_method ||= nil
identify ||= nil
presenter = MatrixBoxPresenter.new(object, @view, link_type, link_method)
columns ||= "col-xs-12 col-sm-6 col-md-4"
%>

<% if presenter %>
  <li class="matrix-box <%= columns %>" id="box_<%= object.id %>">
    <%= panel_block(inner_class: "rss-box-details") do %>
      <div class="thumbnail-container">
        <%= presenter.thumbnail %>
      </div><!-- .thumbnail-container -->
      <div class="rss-what">
        <h5><%= presenter.what %></h5>
        <% if identify && object.consensus_naming %>
          <%= content_tag(:div, class: "my-3") do
            render(partial: "observations/namings/votes/form",
                   locals: { naming: object.consensus_naming })
          end %>
        <% end %>
      </div><!-- .rss-what -->
      <div class="rss-where">
        <small><%= presenter.where %></small>
      </div><!-- .rss-where -->
      <div class="rss-what">
        <small class="nowrap-ellipsis">
          <% unless presenter.when.blank? %>
            <%= presenter.when %>: <%= presenter.who %>
          <% end %>
        </small>
      </div><!-- .rss-when -->
      <div class="rss-detail">
        <%= presenter.detail %>
      </div><!-- .rss-detail -->
      <div class="rss-what">
        <small><%= presenter.fancy_time %></small>
        <% if identify %>
          <%= content_tag(:div, class: "mt-3") do
            caption_mark_as_reviewed_toggle(object.id, "box_reviewed")
          end %>
        <% end %>
      </div><!-- .rss-fancy-time -->
    <% end %>
  </li><!-- .matrix-box -->
<% end %>
