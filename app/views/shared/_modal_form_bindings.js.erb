<%
# Initialize and set bindings for modal forms.
# Called from new/edit form actions
# Requires local var `identifier`, used to identify the modal
# This stuff goes into stimulus
%>

$("#mo_ajax_progress").modal('hide');

$('#modal_<%= identifier %>').on('hidden.bs.modal', function () {
  // only remove the modal if it's not busy.
  if( $(this).attr('data-busy') !== "true" ) {
    $(this).remove();
  }
});

$('#modal_<%= identifier %>').modal('show');
