
<%
presenter_args = local_assigns.except(:image).
                 merge({ size: :large, fit: :contain, original: true })
presenter = ImagePresenter.new(image, presenter_args)
active = (image == default_image) ? " active" : ""
# Caption needs object for copyright info
caption = if (info = image_info(image, object,
                                original: presenter.original)).present?
            tag.div(info, class: "image-info d-none d-md-block")
          else
            ""
          end
%>

<%= tag.div(class: "carousel-item#{active}") do
  [
    image_tag(presenter.img_src, presenter.options_lazy),
    image_stretched_link(presenter.image_link, presenter.image_link_method),
    lightbox_link(presenter.lightbox_data),
    tag.div(
      class: "carousel-caption d-flex flex-column justify-content-center") do
      concat(image_vote_section_html(presenter.votes, presenter.image))
      concat(caption)
    end,
  ].safe_join
end %>
