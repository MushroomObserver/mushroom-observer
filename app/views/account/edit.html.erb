<%
  @title = :profile_title.t

  tabs = [
    link_to(:bulk_license_link.t, images_license_updater_path),
    link_to(:show_user_your_notifications.t, interests_path),
    link_to(:prefs_link.t, account_prefs_path),
    link_to(:account_api_keys_link.t, account_api_keys_path)
  ]
  @tabsets = { right: draw_tab_set(tabs) }
%>

<div class="max-width-text">
  <%= form_with model: @user, html: { multipart: true } do |f| %>

    <%= f.submit :profile_button.l, class: "btn mx-auto mt-3" %>

    <div class="form-group mt-3">
      <%= f.label :name, :profile_name.t + ":" %>
      <%= f.text_field :name, class: "form-control" %>
    </div>

    <div class="form-group mt-3">
      <%= f.label :place_name, :profile_location.t + ":" %> (33%)
      <%= f.text_field :place_name, value: @place_name,
            class: "form-control" %>
      <% turn_into_location_auto_completer("user_place_name") %>
    </div>

    <div class="form-group mt-3">
      <%= f.label :notes, :profile_notes.t + ":" %> (33%)
      <%= f.text_area :notes, rows: 10, class: "form-control" %>
    </div>

    <div class="form-group mt-3">
      <%= f.label(:upload_image, (@user.image_id ? \
            :profile_image_change.t : :profile_image_create.t)) + ":" %> (33%)
      <%= link_to :profile_image_reuse.t,
                  images_reuse_image_path(mode: :profile) %>
      <%= link_to(:profile_image_remove.t, account_remove_image_path,
                  data: { confirm: :are_you_sure.l }) if @user.image %>
      <%= f.custom_file_field(:upload_image) %>
    </div>

    <div class="form-group mt-3">
      <%= f.label :copyright_holder, :profile_copyright_holder.t + ":" %>
      <div class="row">
        <div class="col-8">
          <%= f.text_field :copyright_holder, @copyright_holder,
                class: "form-control" %>
        </div>
        <div class="col-4">
          <%= f.select_year(@copyright_year,
                            { field_name: :copyright_year,
                              start_year: 1980,
                              end_year: Time.now.year },
                            class: "form-control") %>
        </div>
      </div>
      <div class="mt-3">
        <%= f.select(:upload, :license_id, @licenses,
                     { selected: @upload_license_id },
                     class: "form-control") %>
      </div>
      <div class="help-block">(<%= :profile_copyright_warning.t %>)</div>
    </div>

    <div class="form-group mt-3">
      <%= f.label :mailing_address, :profile_mailing_address.t + ":" %>
      <%= f.text_area :mailing_address, rows: 5, class: "form-control" %>
    </div>

    <%= f.submit :profile_button.l, class: "btn mx-auto mt-3" %>

  <% end %>
</div>
