<%
  target = comment.target
  user = comment.user
%>

<div class="list-group-item default comment" id="comment_<%= comment.id %>">
  <div class="row">
    <div class="col-sm-3 col-lg-2 hidden-xs float-right text-center">

      <% if user.image_id %>
        <div class="user-image-sizer">
          <%= image_tag(Image.url(:thumbnail, user.image_id),
                        class: "img-fluid",
                        data: { role: "link", url: user_path(user.id) }) %>
        </div><!-- .user-image-sizer -->
      <% end %>

    </div><!-- .col -->

    <div class="col-xs-12 col-sm-9 col-lg-10">

      <% if local_assigns[:show_name] && show_name %>
        <h4 class="mt-0">
          <%= link_to(target.unique_format_name.t, target.show_link_args) \
                      rescue :comment_list_deleted.t %>
          <small>(<%= target.class.name.to_sym.t rescue :runtime_object_deleted %>)</small>
        </h4>
      <% end %>

      <div class="font-weight-bold">
        <%= comment.summary.tl %>
      </div>

      <div class="comment-info">
        <%= :BY.t %>: <%= user_link(user) %>
        <% if check_permission(comment) %>
          <span class="text-nowrap">
            [<%= link_with_query(:EDIT.t, edit_comment_path(comment.id),
                                class: "edit_comment_link_#{comment.id}",
                                remote: true) %> |
            <%= destroy_button(name: :comment_show_destroy.t, target: comment,
                              remote: true) %>]
          </span>
        <% end %>
        <div class="pull-right text-nowrap small my-0 mx-3">
          <%= comment.created_at.web_time %>
        </div>
      </div><!--.comment-info-->

      <% unless comment.comment.blank? %>
        <div class="p-5px comment-body">
          <%= comment.comment.tpl %>
        </div><!--.comment-body-->
      <% end %>

    </div><!-- .col -->
  </div><!-- .row -->

  <% if user.image_id %>
    <div class="clearfix"></div>
  <% end %>

</div><!-- .list-group -->
