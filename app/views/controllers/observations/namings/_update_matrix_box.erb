<%# locals: (obs:, user:) %>

<%# Replace the title in the lightbox caption %>
<%= turbo_stream.replace("observation_what_#{obs.id}") do %>
  <%= Components::LightboxCaption::ObservationTitle.new(
    obs: obs,
    user: user,
    identify: false
  ) %>
<% end %>

<%# Replace the title in the matrix_box %>
<%= turbo_stream.replace("box_title_#{obs.id}") do %>
  <%= Components::MatrixBox::Title.new(
    id: obs.id,
    name: obs.format_name,
    type: :observation
  ) %>
<% end %>

<%# are not removed via data-controller="section-update" because replaced %>
<%= turbo_stream.close_modal("modal_obs_#{obs.id}_naming") %>
<%= turbo_stream.remove("modal_obs_#{obs.id}_naming") %>
<%= turbo_stream.close_modal("mo_ajax_progress") %>
<%= turbo_stream.remove("mo_ajax_progress") %>
<%= turbo_stream.remove("observation_identify_#{obs.id}") %>
