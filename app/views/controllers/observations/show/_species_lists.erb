<% link = icon_link_with_query(*observation_manage_lists_tab(obs, user)) %>
<%= render(Components::Panel.new(
      inner_id: "observation_species_lists"
    )) do |panel| %>
  <%= panel.with_heading { :show_lists_header.t } %>
  <%= panel.with_heading_links { link } %>
  <% if obs.species_lists.any? %>
    <%= panel.with_body do %>
      <%= tag.ul(class: "list-unstyled mb-0") do
            obs.species_lists.map do |spl|
              tag.li(id: "species_list_#{spl.id}") do
                concat(link_to(spl.format_name.t, species_list_path(spl.id)))
                if permission?(spl)
                  concat(put_button(name: "[#{:REMOVE.t}]",
                                    path: observation_species_list_path(
                                      id: obs.id, species_list_id: spl.id,
                                      commit: "remove"
                                    ),
                                    data: { confirm: :are_you_sure.l }))
                end
              end
            end.safe_join
          end %>
    <% end %>
  <% end %>
<% end %>
