<%# locals: (identifier: "", obs: nil, user: nil, consensus: nil, sites: nil) %>

<%#
NOTE: This is a generalized Turbo-update template for the show obs page.
It updates the observation view with results of an update or create action.

It is intended to DRY the code for partial updates (although less direct),
because these should have at least two consequences:
  - updating a section of show obs
  - updating the page flash to provide feedback that it's updated
Otherwise, the create/update actions could render these explicitly.

The required local is `identifier`, which should match both
  - the partial filename: views/controllers/observations/show/_#{identifier}.erb
  - the last segment of the section's HTML ID as "observation_#{identifier}"
%>

<%
id = "observation_#{identifier}"
partial = "observations/show/#{identifier}"
%>

<%=
turbo_stream.replace(id) do
  render(
    partial: partial,
    locals: local_assigns.except(:identifier),
    layout: false
  )
end

turbo_stream.update("page_flash") do
  flash_notices_html
end
%>
