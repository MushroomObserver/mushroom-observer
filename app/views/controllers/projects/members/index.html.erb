<%
add_project_banner(@project)

container_class(:wide)
%>

<%= render(partial: "projects/members/form",
           locals: { project: @project, candidate: @candidate }) %>

<table class="table table-striped table-project-members mt-3">
  <thead>
    <tr>
      <th class="text-center"><%= :Login_name.t %></th>
      <th><%= :Full_name.t %></th>
      <th><%= :PROJECT_ALIASES.t %></th>
      <th><%= :Status.t %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @users.sort_by(&:login).each do |user| %>
      <tr>
        <td class="text-center">
          <%= if user.image
          render(Components::InteractiveImage.new(
            user: user,
            image: user.image,
            votes: false,
            size: :thumbnail
          ))
              end %>
          <%= user_link(user, user.login) %>
        </td>
        <td class="align-middle">
          <%= user.name %>
        </td>
        <td class="align-middle">
          <%= render(partial: "projects/aliases",
                     locals: { project: @project, target: user }) %>
        </td>
        <td class="align-middle">
          <%= @project.member_status(user) %>
        </td>
        <td class="align-middle">
          <% if @project.is_admin?(@user) %>
            <%= link_to(
              :change_member_status_change_status.t,
              edit_project_member_path(
                project_id: @project.id, candidate: user.id
              )
            ) %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
