<%
case action_name
when "new", "create"
  url = comments_path(target: @comment.target_id, type: @comment.target_type)
when "edit", "update"
  url = comment_path(id: @comment.id)
end

form_args = { action: url, id: "comment_form" }
if local_assigns[:local] == true
  form_args = form_args.merge({ local: true })
else
  form_args = form_args.deep_merge({ data: { turbo: true } })
end

%>
<!--[form:comment]-->
<%= render(Components::CommentForm.new(@comment, **form_args)) %>
<!--[eoform:comment]-->
