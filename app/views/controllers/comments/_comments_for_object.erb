<% #bs4
  if limit && comments
    and_more = comments.length - limit
    comments = comments[0..limit-1]
  end
%>

<%=
tag.div(
  class: "panel panel-default", id: "comments_for_object",
  data: { controller: "section-update", updated_by: "modal_comment" }
) do
  concat([
    tag.div(class: "panel-heading") do
      tag.h4(class: "panel-title") do
        concat(:COMMENTS.t)
        concat(tag.span(new_comment_link(object, btn_class: nil, icon: true),
                        class: "float-right")) if controls
      end
    end,
    tag.div(class: "list-group list-group-flush comments") do
      if comments.empty?
        tag.div(:show_comments_no_comments_yet.t, class: "list-group-item")
      else
        comments.each do |comment|
          concat(render(partial: "comments/comment", object: comment))
        end
      end
    end
  ].safe_join)
  concat(
    tag.div(class: "panel-footer") do
      link_to(:show_comments_and_more.t(num: and_more),
              comments_path(target: object.id, type: object.class.name),
              class: "float-right")
    end
  ) if controls && limit && and_more > 0
end %>
