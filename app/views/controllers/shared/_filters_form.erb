<%# locals: (filter: {}, field_columns: [], model: filter.class.search_type, local: true) -%>
<%
form_args = { model: filter, url: { action: :create },
              id: "#{model}_filter_form" }
# form_args[:model] = filter if filter&:id
%>

<%= form_with(**form_args) do |form| %>

  <%= tag.div(class: "row") do %>
    <% field_columns.each do |panels| %>

      <%= tag.div(class: "col-xs-12 col-md-6") do %>
        <% panels.each do |heading, sections| %>
          <%= filter_panel(form:, filter:, heading:, sections:, model:) %>
        <% end %>
      <% end %>

    <% end %>
  <% end %>

  <%= tag.div(class: "text-center") do %>
    <%= submit_button(form:, button: :SEARCH.l, class: "d-inline-block mx-3") %>
    <%= submit_button(form:, button: :CLEAR.l, class: "d-inline-block mx-3") %>
  <% end %>

<% end %>
