<%#
show/hide controls per user.
  This used to need to be in a template to access the User.current method.
  Not clear if that applies to @user as well.

  Use: `tag.div(data: { user_specific: @user.id })`

source: https://discuss.hotwired.dev/t/how-to-pass-current-user-id-to-a-controller/287/3
%>

<% unless in_admin_mode? %>
  <%# cache @user || "no_user" do %>
    <style>
      <% if @user %>
        [data-user-specific]:not([data-user-specific="<%= @user.id %>"]) { display: none; }
      <% else %>
        [data-user-specific] { display: none; }
      <% end %>
    </style>
  <%# end %>
<% end %>
