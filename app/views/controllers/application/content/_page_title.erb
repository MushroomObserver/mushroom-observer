<%
add_interest_icons = (content_for?(:interest_icons))
title_cols = "col-sm-8 col-lg-7"
title = yield(:title)
show_title_classes = %w[
  show_title_nav d-flex justify-content-between pl-3
]
on_project_page = controller.controller_name == "projects" && action_name == "show"
%>

<%= tag.div(class: "row", id: "title_bar") do %>
  <%# Page title. Indexes have none â€” `rubric` in top_nav has model name. %>
  <%# Projects handle their own title in ProjectBanner. %>
  <% if action_name != "index" && !on_project_page %>
    <%= tag.div(class: yield(:left_columns)) do %>
      <%= tag.nav(class: class_names(show_title_classes)) do
        concat(tag.h1(title, class: "h3 page-title mt-3 mb-4", id: "title"))
        concat(show_page_edit_icons)
      end %>
      <%= yield(:owner_naming) %>
    <% end %>
  <% end %>

  <%# Show pages (except projects): %>
  <%# Interest and edit icons, prev/index/next links %>
  <% if action_name == "show" && !on_project_page %>
    <%= tag.div(
      class: class_names(yield(:right_columns), "hidden-print text-right")
    ) do
      tag.nav(class: "show_object_nav d-flex justify-content-between pr-3") do
        [
          show_page_interest_icons,
          yield(:prev_next_object)
        ].safe_join
      end
    end %>
  <% end %>
<% end %>
