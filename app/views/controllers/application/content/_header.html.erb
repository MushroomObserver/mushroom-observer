<%#
The header for page content (below the application top nav)
May include:
prev_next_pager
title
query filters (indexes)
context_help
owner_naming
interest_icons
context_nav
type_filters
%>
<%
add_filter_help(@any_content_filters_applied)
add_interest_icons = (content_for?(:interest_icons))
left_cols = add_interest_icons ? "col-xs-8 col-lg-7" : "col-xs-12"
filters = content_for?(:filters) || content_for?(:filter_help)
%>

<%= tag.header(id: "header") do %>
  <%= tag.div(class: "row") do %>
    <%# Push down pager, title on small, xs screens so buttons do not block %>
    <%= tag.div(safe_nbsp, class: "hidden-print visible-xs visible-sm mt-4") %>

    <%= tag.div(class: left_cols, id: "title_bar") do %>
      <%# Show pages: prev/index/next links %>
      <%= content_tag_if(content_for?(:prev_next_object), :div,
                        class: "hidden-print") do
            yield(:prev_next_object)
          end -%>

      <%# Project header %>
      <% if content_for?(:background_image) %>
        <%= render(partial: "application/content/project_title") %>
      <% end %>

      <%# Indexes: Query filter subtitle and pagination %>
      <%= tag.div(class: "d-flex justify-content-between") do %>
        <%= tag.div(class: "px-3") do %>
          <% if filters %>
            <%= yield(:filters) -%>
            <%= yield(:filter_help) -%>
          <% end %>
        <% end %>
        <%= tag.div do %>
          <%= yield(:letters) %>
          <%= yield(:numbers) %>
        <% end %>
      <% end %>

      <%# Page title %>
      <% if !content_for?(:background_image) %>
        <% unless action_name == "index" %>
          <%= tag.h1(yield(:title), class: "h3", id: "title") -%>
        <% end %>
        <% if content_for?(:location) %>
          <%= tag.div(yield(:location), class: "image-title-text") %>
        <% end %>
        <% if content_for?(:date_range) %>
          <%= tag.div(yield(:date_range), class: "image-title-text") %>
        <% end %>
      <% end %>
      <%= yield(:owner_naming) %>
    <% end %>

    <%# Interest and edit icons %>
    <%= content_tag_if(
      add_interest_icons, :div,
      id: "interest_edit_icons",
      class: "hidden-print text-right col-sm-4 col-lg-5 mb-3"
    ) do
      concat(yield(:interest_icons))
      concat(yield(:edit_icons))
    end %>

    <%# RssLog type filters %>
    <%= content_tag_if(content_for?(:type_filters), :div,
                      class: "hidden-print col-xs-12") do
          yield(:type_filters)
        end %>

    <%# Project tabs %>
    <% if content_for?(:project_tabs) %>
      <%= tag.div(class: left_cols, id: "project_tabs") do
        yield(:project_tabs)
      end %>
    <% end %>

    <%# Observation buttons %>
    <% if content_for?(:observation_buttons) %>
      <%= tag.div(class: left_cols, id: "observation_buttons") do
        yield(:observation_buttons)
      end %>
    <% end %>

  <% end %>
<% end %>
