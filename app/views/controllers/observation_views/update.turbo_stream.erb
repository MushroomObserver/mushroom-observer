<%# this is just replacing the whole toggle in both places %>
<%= turbo_stream.replace("caption_reviewed_toggle_#{@obs_id}") do
  mark_as_reviewed_toggle(@obs_id, selector = "caption_reviewed",
                          label_class = "", reviewed = @reviewed)
end %>

<%= turbo_stream.replace("box_reviewed_toggle_#{@obs_id}") do
  mark_as_reviewed_toggle(@obs_id, selector = "box_reviewed",
                          label_class = "stretched-link", reviewed = @reviewed)
end %>

<%# Update the lightbox data-sub-html attribute for caption persistence %>
<% caption_html = render(Components::LightboxCaption.new(
  user: User.current,
  obs: @obs,
  identify: true
)) %>
<turbo-stream action="update_lightbox_caption" obs-id="<%= @obs_id %>">
  <template><%= caption_html %></template>
</turbo-stream>
