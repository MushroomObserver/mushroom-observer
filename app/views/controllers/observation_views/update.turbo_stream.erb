<%# this is just replacing the whole toggle in both places %>
<%= turbo_stream.replace("caption_reviewed_toggle_#{@obs_id}") do
  render(Components::MarkAsReviewedToggle.new(
    observation_view: @observation_view,
    selector: "caption_reviewed"
  ))
end %>

<%= turbo_stream.replace("box_reviewed_toggle_#{@obs_id}") do
  render(Components::MarkAsReviewedToggle.new(
    observation_view: @observation_view,
    selector: "box_reviewed",
    label_class: "stretched-link"
  ))
end %>

<%# Update the lightbox data-sub-html attribute for caption persistence %>
<% caption_html = render(Components::LightboxCaption.new(
  user: @user,
  obs: @obs,
  identify: true,
  observation_view: @observation_view
)) %>
<turbo-stream action="update_lightbox_caption" obs-id="<%= @obs_id %>">
  <template><%= caption_html %></template>
</turbo-stream>
