<%# locals: (display_name: nil, location: nil, button: nil, f: nil) -%>

<%= tag.div(class: "mt-3") do
  f.label(:display_name, :WHERE.t + ":")
end %>

<%= tag.div(class: "input-group") do %>
  <%= f.text_field(:display_name, value: display_name,
    class: "form-control", between: collapse_info_trigger("locality_help"),
    data: { autofocus: true, map_target: "placeInput" }
  ) %>

  <%= tag.span(class: "input-group-btn") do
    tag.button(
      :form_locations_find_on_map.t,
      type: "button", class: "btn btn-default",
      data: { map_target: "showBoxBtn", action: "map#showBox"}
    )
  end %>

  <%= collapse_help_block(nil, id: "locality_help") do
    :form_locations_help.t
  end %>
<% end %>

<%= render(partial: "locations/form/north_south_east_west_alt_fields",
           locals: { f: f }) %>

<%= if in_admin_mode?
  check_box_with_label(form: f, field: :locked, class: "mt-3",
                       label: :form_locations_locked.t)
end %>

<%= text_area_with_label(
  form: f, field: :notes, label: :NOTES.t + ":",
  between: collapse_info_trigger("notes_help")
) %>
<%= collapse_help_block(nil, id: "notes_help") do
  concat(tag.p(:form_locations_notes_help.t))
  concat(tag.p(:shared_textile_help.l))
end %>

<% if location.observations.empty? %>
  <%= check_box_with_label(
    form: f, field: :hidden, class: "mt-3 mr-3",
    label: :form_locations_hidden.t,
    append: collapse_info_trigger("location_hidden_help", class: "ml-3")) %>
  <%= collapse_help_block(nil, id: "location_hidden_help") do
    :form_locations_hidden_doc.t
  end %>
<% end %>

<%= submit_button(form: f, button: button, class: "mt-4",
                  center: false) %>
