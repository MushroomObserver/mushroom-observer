<%
container_class(:text_image)
add_index_title(@query)
add_context_nav(all_names_index_tabs(query: @query))
add_sorter(@query, names_index_sorts(query: @query))
# Let test_index test pass args to pagination_links.
args = @test_pagination_args || {}
add_pagination(@pagination_data, args)

flash_error(@error) if @error && @objects.empty?
%>

<% if @suggest_alternate_spellings && @objects.empty?
  names = Name.suggest_alternate_spellings(@suggest_alternate_spellings)
  if names.any? %>
  <div class="alert-warning">
    <%= :list_observations_alternate_spellings.t %><br />
    <ul type="none">
      <% names.sort_by(&:sort_name).each do |name| %>
        <%= link_to(name.user_display_name(@user).t, name.show_link_args) %><br />
      <% end %>
    </ul>
  </div>
<% end %>
<% end %>

<%= @help.tp if @help %>

<%= paginated_results do %>
  <% if @objects.any? %>
    <% counts = Name.count_observations(@objects) %>

    <%= tag.div(class: "list-group") do %>
      <%= render(partial: "name", collection: @objects, as: :name,
                 locals: { counts: }) %>
    <% end %>

  <% end %>
<% end %>
