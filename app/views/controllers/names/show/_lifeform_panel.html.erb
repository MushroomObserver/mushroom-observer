<%
heading = :show_name_lifeform.l
link = icon_link_to(*edit_name_lifeform_tab(@name))
heading_links = @user ? link.html_safe : ""
%>

<%= render(Components::Panel.new(
      panel_class: "name-section",
      panel_id: "name_lifeform",
      attributes: { data: { name_panels_target: "lifeform" } }
    )) do |panel| %>
  <%= panel.with_heading do %>
    <%= heading %>
  <% end %>
  <% if @user %>
    <%= panel.with_heading_links do %>
      <%= heading_links %>
    <% end %>
  <% end %>
  <%= panel.with_body do %>
    <% if !@name.lifeform.blank? %>
      <%= tag.div(class: "mb-2") do %>
        <% @name.lifeform.strip.split(" ").each do |word| %>
          <%= tag.p(:"lifeform_#{word}".t) %>
        <% end %>
      <% end %>
    <% end %>

    <% if @first_child %>
      <%= tag.p(
        link_to(:show_name_propagate_lifeform.t,
                form_to_propagate_lifeform_of_name_path(@name.id))
      ) %>
    <% end %>
  <% end %>
<% end %>
