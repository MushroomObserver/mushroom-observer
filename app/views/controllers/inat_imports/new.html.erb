<%
  add_page_title(:inat_import_create_title.l)
  add_context_nav(inat_import_form_new_tabs)
%>

<div>
  <%= form_with(url: inat_imports_path, method: :post) do |f| %>
    <%= f.label(:inat_username, "#{:inat_username.l}: ") %>
    <%= f.text_field(:inat_username, size: 10, class: "form-control",
                     value: User.current.inat_username) %>

    <%= panel_block(id: "choose_observation",
                    heading: :inat_choose_observations.l,
                    class: "name-section") do %>
      <%= f.label(:inat_id, "#{:inat_import_list.l}: ") %>
      <%= f.text_field(:inat_ids, size: 10, value: @inat_ids,
          class: "form-control") %>
      <%= check_box_with_label(form: f, field: :all,
                               class: "mt-3", label: :inat_import_all.l) %>
    <% end %>

    <%= check_box_with_label(form: f, field: :consent,
                             class: "mt-3", label: :inat_import_consent.l) %>
    <%= panel_block do %>
      <p><b><%= :inat_details_heading.l %></b></p>
      <%= :inat_details_list.t %>
    <% end %>

    <%= panel_block(id: "preview", heading: :inat_import_preview.l,
                    class: "name-section") do
      tag.div do
        concat(tag.p(
          "#{:inat_import_expected_count.l}: " \
          "#{inat_expected_import_count(@inat_import)}"
        ))
        concat(tag.p(inat_expected_imports_link(@inat_import)))
      end
    end %>

    <%= f.submit(:SUBMIT.l, { class: "btn btn-default" }) %>
  <% end %>
</div>
