<%
  @container = :wide
  add_page_title(:inat_import_tracker.t)
  # add_tab_set(article_show_tabs(article: @article, user: @user))
%>

<%=
  render(partial: "inat_imports/job_trackers/updates",
         locals: { tracker: @tracker })
%>

<% if @inat_import.response_errors.present? %>
  <p>
    <b><%= :ERRORS.t %>: </b>
    <%= tag.span(id: "errors", class: "violation-highlight") do %>
      <% @inat_import.response_errors.each_line do |error| %>
        <%= error %></br>
      <% end %>
    <% end %>
  </p>
<% end %>

<p>
  <%# Display refresh button if job is incomplete%>
  <% if import_incomplete?(@inat_import) %>
       <button class="btn btn-default" onclick="location.reload();">
         <%= :inat_import_tracker_refresh.l %>
       </button>
  <% else
       results =
         Observation.where(user: User.current, source: "mo_inat_import").
         where(Observation[:created_at] >= (@tracker.created_at))
       # Under construction; button below should link to index of above results
  %>
       <%= link_to(:app_your_observations.l,
                   observations_path(by_user: User.current.id),
                   { class: "btn btn-default" } ) %>
  <% end %>
</p>
