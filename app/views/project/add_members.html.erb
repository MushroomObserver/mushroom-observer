<%
  @title = :add_members_title.t(title: @project.title)

  tabs = [
    link_with_query(:cancel_and_show.t(type: :project), @project.show_link_args)
  ]
  @tabsets = { right: draw_tab_set(tabs) }
  @container = :wide
%>

<div class="container-text">
  <%= form_tag({ id: @project.id }, { class: "mt-3 pb-2"}) %>
    <span class="text-larger"><%= :LOGIN_NAME.t %>:</span><!-- .text-larger --><br/>
    <%= text_field_tag(:candidate, @candidate, size: 40,
                                               data: {autofocus: true},
                                               class: "form-control") %><br/>
    <% turn_into_user_auto_completer(:candidate) %>
    <%= submit_tag(:ADD.t, class: "btn btn-default ml-3") %>
  </form>
</div><!--.container-text-->

<table class="table-striped table-project-members mt-3">
  <thead>
    <tr>
      <th><%= :Login_name.t %></th>
      <th><%= :Full_name.t %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @users.sort_by(&:login).each do |user| %>
      <tr>
        <td>
          <%= user_link(user, user.login) %>
        </td>
        <td>
          <%= user.name %>
        </td>
        <td>
          <%= link_with_query(:ADD.t, action: :add_members, id: @project.id,
                              candidate: user.id) %>
        </td>
      </tr
    <% end %>
  </tbody>
</table>
