<%#
need to hide the modal. stimulus?
https://stackoverflow.com/questions/76467781/run-custom-javascript-when-turbo-stream-is-received

$('#mo_ajax_progress_caption').empty();
$('#mo_ajax_progress').modal('hide');
%>

<%
# Update observation view with results of update or create
# Needs locals: identifier
# The namings table is in another folder
if identifier == "namings"
  id = "namings_table"
  partial = "observations/namings/table"
else
  id = "observation_#{identifier}"
  partial = "observations/show/#{identifier}"
end
%>

<%= turbo_stream.replace(id) do
  render(
    partial: partial,
    locals: { obs: @observation.reload },
    layout: false
  )
end %>

<%= turbo_stream.update("page_flash") do
  flash_notices_html
end %>

<%#
// Remove the modal, because results on page
$(".modal").attr('data-busy', 'false').modal('hide');
%>
