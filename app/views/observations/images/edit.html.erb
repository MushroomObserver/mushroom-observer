<% #bs4
  @title = :image_edit_title.t(name: @image.unique_format_name)

  tabs = create_tabs(observation_images_edit_links(image: @image))
  @tabsets = { right: draw_tab_set(tabs) }
  @container = :wide
  form_action = { controller: "/observations/images",
                  action: :update,
                  id: @image.id,
                  q: get_query_param }
%>

<div class="row">
  <div class="col-12 col-md-8 col-lg-6 col-xl-4">
    <%= form_with(model: @image, url: form_action, method: :put) do |f| %>

      <%= submit_button(form: f, button: :SAVE_EDITS.l, center: true) %>

      <%= render(partial: "observations/images/form/fields_for_images",
                locals: { f: f, leave_out_original_file_name: false }) %>

      <% if @projects.any? %>
        <div class="form-group form-inline">
          <%= content_tag(:p, :PROJECTS.t + ":", class: "font-weight-bold") %>
          <%= help_block(:p, :form_images_project_help.t) %>
          <%= render(partial: "observations/images/form/project",
                    collection: @projects) %>
        </div>
      <% end %>

      <div class="text-center mt-3 mb-5">
        <%= submit_button(form: f, button: :SAVE_EDITS.l) %>
        <%= link_with_query(:cancel_and_show.t(type: :image),
                            image_path(@image.id),
                            class: "btn btn-outline-secondary") %>
      </div>

    <% end %>
  </div><!--.col-->

  <div class="col-12 col-md-4 col-lg-6 col-xl-8">
    <%= interactive_image(@image, size: :medium, votes: true) %>
  </div><!--.col-->

</div><!--.row-->
