<%
  @owner_naming = owner_naming_line(@observation) # must before show_obs_title
  @title = show_obs_title(@observation)
  @tabsets = show_observation_tabset(obs: @observation, user: @user,
                                     mappable: @mappable)
  @container = :wide

  # Needed here, because we reference these in the page before they're loaded
  # javascript_include("suggestions")
  # javascript_include("vote_by_ajax")

  show_map   = @user ? @user.thumbnail_maps : !session[:hide_thumbnail_maps]
  show_lists = @user && @observation.species_lists.any?
  show_links = @user && (@observation.external_links.any? || @new_sites.any?)
%>

<div class="row">
  <div class="col-md-8 float-sm-left">
    <%= render(partial: "observations/show/observation",
               locals: { observation: @observation }) %>
  </div>
  <div class="col-md-4 float-sm-right">
    <% if @user %>
      <%= render(partial: "observations/show/name_info",
                 locals: { observation: @observation }) %>

      <% if show_lists %>
        <%= render(partial: "observations/show/lists",
                   locals: {observation: @observation}) %>
      <% end %>

      <% if show_links %>
        <%= render(partial: "observations/show/links",
                   locals: {observation: @observation}) %>
      <% end %>
    <% end %>

    <% if show_map %>
      <%= render(partial: "observations/show/thumbnail_map",
                 locals: { observation: @observation }) %>
    <% end %>

    <%= render(partial: "observations/show/images",
               locals: { observation: @observation }) %>
  </div>

  <div class="col-md-8 float-sm-left">
    <% if @user %>
      <%= render(partial: "observations/show/namings",
                 locals: { observation: @observation }) %>
    <% end %>

    <%= render(partial: "comments/comments_for_object",
               locals: { object: @observation, controls: true, limit: nil }) %>
  </div>

</div><!--.row-->

<%= show_object_footer(@observation) %>
