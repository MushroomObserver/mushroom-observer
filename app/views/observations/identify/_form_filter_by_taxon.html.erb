<%# filter for identify observations index %>
<%# TODO: make this a select with autocomplete that sends the ID %>
<%# Otherwise the name has to be looked up (several times) %>

<%
placeholder = if params[:name].present?
                ("Filtered by taxon: " + params[:name])
              else
                "Filter by taxon"
              end
options = [
  [:NAME.l, :name],
  [:LOCATION.l, :location],
  [:USER.l, :user],
]
%>

<%= form_with(url: identify_observations_path, method: :get,
              id: "filter_by_taxon") do |f| %>

  <%= f.label(:name, "Filter by taxon:") %>
  <%= f.text_field(:name,
                    # turn off browser autocomplete
                    autocomplete: "off",
                    placeholder: placeholder,
                    class: "d-inline-block",
                    data: { autofocus: true }) %>

  <%= f.select(:type, options_for_select(options), { selected: :name },
               { class: "form-control" }) %>

  <%= f.submit(:SEARCH.l, class: "btn btn-default d-inline-block") %>

  <%= f.submit("Clear query", class: "btn btn-default d-inline-block") %>

  <% turn_into_name_above_genus_auto_completer(:name) %>

<% end %>
