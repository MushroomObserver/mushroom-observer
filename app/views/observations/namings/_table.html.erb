<%
# called from observations/show/namings
# Just the "table" of current namings, with headers
logged_in = @user&.verified
namings = obs.namings.sort_by(&:created_at)
header = observation_naming_header_row(obs, logged_in)
votes = gather_users_votes(obs, @user)
%>

<div class="namings-table" id="namings_table">
  <div class="container-fluid">
    <header class="row">
      <div class="col col-xs-12 col-sm-3"><%= header[:heading] %></div>
      <div class="col col-sm-3 hidden-xs"><%= header[:user_name] %></div>
      <div class="col col-sm-2 hidden-xs"><%= header[:consensus_vote] %></div>
      <div class="col col-sm-3 hidden-xs"><%= header[:your_vote] %></div>
      <div class="col col-sm-1 hidden-xs"></div>
    </header>
  </div>

  <div class="container-fluid panel panel-default">
    <% namings.each do |naming| %>
      <%= render(partial: "observations/namings/row",
                  locals: { naming: naming, obs: obs,
                            votes: votes, logged_in: logged_in }) %>
    <% end # each naming %>
  </div>
</div>

<%= tag.div(class: "namings-table panel panel-default mb-4",
            id: "namings_table") do %>

  <%= render(partial: "observations/namings/table_header",
                locals: { logged_in: logged_in, obs: obs }) %>

  <%= tag.div(class: "list-group list-group-flush") do %>
    <% if any_names
      namings.each do |naming| %>
        <%= render(partial: "observations/namings/table_row",
              locals: { logged_in: logged_in, obs: obs,
                        naming: naming, votes: votes }) %>
      <% end
    else %>
      <%= tag.div(:show_namings_no_names_yet.t, class: "list-group-item") %>
    <% end
  end %>

  <%= render(partial: "observations/namings/table_footer",
             locals: { logged_in: logged_in, obs: obs }) %>

<% end %>
