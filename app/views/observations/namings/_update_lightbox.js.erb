// Update lightbox caption and matrix box title
// with results of update or create naming, or vote

var obs_id = '<%= @observation.id %>';
var lightbox = $("#lightbox")

// update the caption title in the lightbox
var caption_what = $("#observation_what_" + obs_id);
caption_what.html('<%= show_obs_title(obs: @observation) %>');

// update the matrix box title in the page
var matrix_what = $("#box_" + obs_id).find(".rss-what h5");
matrix_what.html('<%= link_to(
  @observation.format_name.t.break_name.small_author,
  observation_path(@observation.id, q: get_query_param)
) %>');

// move focus to "lightbox-next"
if(lightbox.length && (lightbox.css('display') == 'block')) {
  $(".lb-next").first().focus()
}

// Remove the modal, because results on page
$(".modal").attr('data-busy', 'false').modal('hide');
