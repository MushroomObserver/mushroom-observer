// What to do on ajax create

var observation_namings = $("#observation_namings")
$("#namings_table").remove();

// Are we on show_obs, or obs_needing_ids?
if (observation_namings.length) {
  // alert("Wowie");
  // reset title of obs if necessary
  var title = '<%= content_tag(:div, show_obs_title(obs: @observation), title: show_obs_title(obs: @observation).strip_html.html_safe) %>';

  document.title = $(title).attr('title');
  $("#title").html(title);

  observation_namings.prepend('<%= j render(partial: "observations/namings/table", locals: { observation: @observation.reload }, layout: false) %>');
  // Need to redo bindings for entire table and hide cast vote buttons
  VoteByAjaxModule({
    show_namings_lose_changes: '<%= j :show_namings_lose_changes.l.gsub("\n", " ") %>',
    show_namings_saving: '<%= j :show_namings_saving.l %>'
  })
} else {
  // send a success message for the lightbox
}

// Finally, remove the modal
$("#modal_propose_naming").modal('hide');
