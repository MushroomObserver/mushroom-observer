<%# Projects section of create_observation form %>
  <% if @suspect_checked_projects.any? %>
    <% flash_error(:form_observations_there_is_a_problem_with_projects.t) %>

    <div class="alert alert-danger"
         id="project_messages">
      <%= tag.p(
        "#{:form_observations_projects_out_of_range.t(
          date: @observation.when
        )}:"
      ) %>
      <ul>
        <% @suspect_checked_projects.each do |proj| %>
        <%= tag.li("#{proj.title} (#{proj.start_date_str} -
                    #{proj.end_date_str})") %>
        <% end %>
      </ul>
      <%= tag.p(
        :form_observations_projects_out_of_range_help.t(button: button_name)
      )%>
    </div>
  <% end %>

<div class="mt-3 row" id="observation_projects">
  <div class="col-xs-12 col-sm-6 col-sm-push-6">
    <%= help_block_with_arrow("left", id: "project_help") do %>
      <%= :form_observations_project_help.t %>
    <% end %>
  </div><!--.col-->

  <div class="col-xs-12 col-sm-6 col-sm-pull-6">
    <strong><%= :PROJECTS.t %>:</strong>

    <%= fields_for(:project) do |f_p| %>
      <% if @suspect_checked_projects.any? %>
        <%= check_box_with_label(
          form: f_p, field: :ignore_proj_dates,
          label: :form_observations_projects_ignore_project_dates.t,
          class: "alert alert-danger"
        ) %>
      <% end %>

      <% @projects.each do |project| %>
        <%= check_box_with_label(form: f_p, field: :"id_#{project.id}",
                                 checked: @project_checks[project.id],
                                 disabled: !project.user_can_add_observation?(@observation, @user),
                                 label: link_to_object(project)) %>
      <% end %>
    <% end %>

  </div><!--.col-->
</div><!--.row-->
