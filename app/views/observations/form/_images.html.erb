<%# Images (already attached) section of create_observation form %>
<%
good_image_ids_str = @good_images.map { |img| img.id }.join(" ")
max_size = MO.image_upload_max_size
legible_max_size = (max_size.to_f/1024/1024).round

image_upload_localization = {
  uploading_text: :form_observations_uploading_images.t,
  image_too_big_text: :form_observations_image_too_big.t(max: legible_max_size),
  creating_observation_text: :form_observations_creating_observation.t,
  months: :all_months.t,
  show_on_map: :show_on_map.t,
  something_went_wrong: :form_observations_upload_error.t
}.to_json
%>

<%= tag.div(class: "my-4", id: "observation_images",
            data: { controller: "obs-form-images",
                    localization: image_upload_localization,
                    upload_max_size: max_size }) do %>

  <%= tag.p { tag.strong("#{:IMAGES.t}:") } %>

  <% @good_images.each do |image| %>
    <%= render(partial: "observations/form/good_image",
               locals: { f: f, image: image }) %>
  <% end # @good_images.each do image %>

  <%= hidden_field_tag(:good_images, good_image_ids_str,
                       data: { observation_images_target: "goodImages" }) %>

  <%= render(partial: "observations/form/images_upload", locals: { f: f }) %>

<% end %><!--#observation_images-->
