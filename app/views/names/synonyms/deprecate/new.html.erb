<%
@title = :name_deprecate_title.t(name: @name.display_name)

tabs = create_tabs(name_forms_return_links(name: @name))
@tabsets = { right: draw_tab_set(tabs) }

action = { controller: "/names/synonyms/deprecate", action: :create,
            id: @name.id, approved_name: @what }

feedback_locals = {
  button_name: :SUBMIT.l,
  what: @what,
  valid_names: @valid_names,
  suggest_corrections: @suggest_corrections,
  parent_deprecated: @parent_deprecated,
  names: @names
}
%>

<%= form_with(url: action, id: "name_deprecate_synonym_form") do |f| %>

  <%= submit_button(form: f, button: :SUBMIT.l, center: true) %>

  <%= render(partial: "shared/form_name_feedback",
             locals: feedback_locals.merge({ f: f })) if @what.present? %>

  <%= text_field_with_label(
        form: f, field: :proposed_name, inline: true, value: @what,
        label: "#{:name_deprecate_preferred.t}:", data: { autofocus: true },
        append: help_note(:div, :name_deprecate_preferred_help.tp)
      ) %>
  <% turn_into_name_auto_completer(:proposed_name, primer: Name.primer) %>

  <%= check_box_with_label(form: f, field: :is_misspelling,
                           checked: @misspelling,
                           label: :form_names_misspelling.t) %>

  <%= text_area_with_label(form: f, field: :comment, inline: true,
                           label: "#{:name_deprecate_comments.t}:",
                           value: @comment, cols: 80, rows: 5) %>
  <%= content_tag(:div, class: "help-note") do
    concat(:name_deprecate_comments_help.tp(
             name: @name.display_name.chomp(".")
           ))
    concat(:field_textile_link.tp)
  end %>

<% end %>
