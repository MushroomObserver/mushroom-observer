<%
  @title = :name_deprecate_title.t(name: @name.display_name)

  tabs = [
    link_to(:cancel_and_show.t(type: :name), @name.show_link_args)
  ]
  @tabsets = { right: draw_tab_set(tabs) }

  action = { controller: "/names/synonyms/deprecate", action: :create,
             id: @name.id, approved_name: @what }
%>

<%= form_with(url: action, id: "name_deprecate_synonym_form") do |f| %>

  <%= centered_submit(form: f, button: :SUBMIT.l) %>

  <%= render(partial: "shared/form_name_feedback",
             locals: { button_name: :SUBMIT.l,
                       what: @what,
                       valid_names: @valid_names,
                       suggest_corrections: @suggest_corrections,
                       parent_deprecated: @parent_deprecated,
                       names: @names }) if @what.present? %>

  <%= inline_label_text_field(form: f, field: :proposed_name,
                              text: "#{:name_deprecate_preferred.t}:",
                              value: @what, data: { autofocus: true }) %>
  <%= content_tag(:div, :name_deprecate_preferred_help.tp,
                  class: "help-note") %>
  <% turn_into_name_auto_completer(:proposed_name, primer: Name.primer) %>

  <%= check_box_with_label(form: f, field: :is_misspelling,
                           checked: @misspelling,
                           text: :form_names_misspelling.t) %>

  <%= inline_label_text_area(form: f, field: :comment,
                             text: "#{:name_deprecate_comments.t}:",
                             value: @comment, cols: 80, rows: 5) %>
  <%= content_tag(:div, class: "help-note") do
    concat(:name_deprecate_comments_help.tp(
             name: @name.display_name.chomp(".")
           ))
    concat(:field_textile_link.tp)
  end %>

<% end %>
