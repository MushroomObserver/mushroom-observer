<%
  @title = ""
  @container = :wide
%>

<div class="row">
  <div class="col-xs-6">
    <p><%= link_to("Refresh Stats", admin_blocked_ips_path) %></p>

    <%# ----- Okay IPs ----- %>
    <div class="m-3 p-3" style="background:#f7f">
      <%= form_with(url: { action: :blocked_ips }, class: "pb-2") do |form| %>

        <div class="form-group form-inline">
          <span class="text-larger">Okay IPs:</span><!-- .text-larger --> &nbsp;&nbsp;
          <%= form.text_field(:add_okay, value: "", size: 20,
                              data: { autofocus: true },
                              class: "form-control") %>
          <%= form.submit(:ADD.l, class: "btn btn-default ml-3") %>
          [<%= link_to(
                "Clear List", admin_blocked_ips_path(clear_okay: 1)
              ) %>]
        </div>

      <% end %>

      <table class="ips">
        <% @okay_ips.each do |ip| %>
          <tr>
            <td><%= ip.t %></td>
            <td>[<%= link_to(
                      :REMOVE.l, admin_blocked_ips_path(remove_okay: ip)
                    ) %>]</td>
        <% end %>
      </table>
    </div>

    <%# ----- Blocked IPs ----- %>
    <div class="m-3 p-3" style="background:#f7f">

      <%= form_with(url: { action: :blocked_ips }, class: "pb-2") do |form| %>
        <div class="form-group form-inline">
          <span class="text-larger">Blocked IPs:</span><!-- .text-larger --> &nbsp;&nbsp;
          <%= form.text_field(:add_bad, value: "", size: 20,
                              data: { autofocus: true },
                              class: "form-control") %>
          <%= form.submit(:ADD.l, class: "btn btn-default ml-3") %>
          [<%= link_to(
                "Clear List", admin_blocked_ips_path(clear_bad: 1)
              ) %>]
        </div>
      <% end %>

      <table class="ips">
        <% @blocked_ips.each do |ip| %>
          <tr>
            <td><%= ip.t %></td>
            <td>[<%= link_to(
                      :REMOVE.l, admin_blocked_ips_path(remove_bad: ip)
                    ) %>]</td>
      <% end %>
      </table>
    </div>
  </div>

  <%# ----- Stats / Most Active Users ----- %>
  <div class="col-xs-6">
    <% if @ip.present? %><p><%= render partial: "ip_stats" %></p><% end %>
    <p><%= render partial: "ip_summary" %></p>
  </div>
</div>
